# TravisCI configuration for thefrosty/wp-utilities

branches:
  only:
    - master
    - develop
    - "/^.*[Ff]eature\\/.*$/"
    - "/^.*[rR]elease\\/.*$/"
    - "/^.*[bB]ug\\/.*$/"
    - "/^.*[Hh]otfix\\/.*$/"

git:
  depth: false

language: php
os:
  - linux
dist: focal

php:
  - "7.4"

env:
  global:
    - WP_VERSION=5.7.1
    - WP_MULTISITE=0
    - XDEBUG_MODE=coverage

jobs:
  fast_finish: true
  include:
    - php: "8.0"
      install:
        - composer require --prefer-dist --no-interaction --prefer-stable 'phpunit/phpunit:^8.0'

cache:
  directories:
    - "$HOME/.composer/cache"

install:
  - composer update --prefer-dist --no-interaction --prefer-stable

script:
  - composer tests

notifications:
  email:
    on_success: never
    on_failure: change
